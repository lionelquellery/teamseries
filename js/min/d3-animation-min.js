function draw(t){var e=generateData(),a=30,r=d3.scale.linear().domain([0,d3.max(e)]).range([0+a,h-60]),n=d3.scale.linear().domain([0,e.length]).range([0+a,w+50]),i=d3.svg.line().x(function(t,e){return n(e)}).y(function(t){return-1*r(t)});console.log(e);var c=d3.select("#entity-chart").select("svg").select("g");c.empty()&&(c=d3.select("#entity-chart").append("svg:svg").attr("width",w).attr("height",h),g=c.append("svg:g").attr("transform","translate(0, 350)"),g.append("svg:line").attr("x1",n(0)).attr("y1",-1*r(0)).attr("x2",n(w)).attr("y2",-1*r(0)),g.selectAll(".xLabel").data(n.ticks(12)).enter().append("svg:text").attr("class","xLabel").text(String).attr("x",function(t){return n(t-1)}).attr("y",0).attr("text-anchor","middle")),g.append("svg:path").attr("class",t).attr("d",i(reset)).transition().duration(duration).ease(ease).attr("d",i(e)),g.selectAll("dot").data(e).enter().append("circle").attr("class",t).attr("r",6.5).attr("cx",function(t,e){return n(e)}).attr("cy",0).transition().duration(duration).ease(ease).attr("cy",function(t){return-1*r(t)}).attr("title",function(t,e){return n(e)}),current=t,console.log("current = "+current,"data = "+e),$("svg circle").tipsy({gravity:"s",html:!0,fade:!0,opacity:.95,title:function(){var t=this.__data__,a=t.date;return"Saison: "+e.push()}})}function removeData(t){d3.selectAll("circle."+t).transition().duration(duration).ease(ease).attr("cy",0).attr("r",0).remove(),d3.selectAll("path."+t).remove()}function generateData(){for(var t=[],e=0,a=10;a>e;e++)t.push(Math.round(Math.random()*a));return t}function subMetricChange(){$(".benchmarks-checkbox").on("change",function(t){id=$(this).attr("id"),$(this).is(":checked")?($(this).parent().addClass("active"),draw(id)):(removeData(id),$(this).parent().removeClass("active")),t.preventDefault()}),$('button[type="submit"]').on("click",function(t){$(".benchmarks-checkbox").prop("checked",!1),$(".benchmarks-label").removeClass("active"),id=$(this).attr("id"),$(".sub-metric-checkbox").parent().removeClass("active"),d3.selectAll("circle").transition().duration(duration).ease(ease).attr("cy",0).attr("r",0).remove(),d3.selectAll("path").remove(),$(this).parent().addClass("active"),draw(id),t.preventDefault()})}function pageInit(){$("#Scoring-Metric-1").addClass("first").attr("checked","checked").parent().addClass("active"),id=$(".sub-metric-checkbox.first").attr("id"),draw(id)}var w=780,h=350,vis=null,g,current,duration=700,ease="cubic-out",reset=[0,0,0,0,0,0,0,0,0,0,0,0,0];$(document).ready(function(){subMetricChange(),pageInit()});